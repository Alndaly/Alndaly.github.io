

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Kinda Hall">
  <meta name="keywords" content="个人博客, Personal Blog">
  
    <meta name="description" content="VIM相关文档">
<meta property="og:type" content="article">
<meta property="og:title" content="VIM-打开和搜索文件">
<meta property="og:url" content="https://alndaly.github.io/2022/04/05/Vim/ch03_searching_files/index.html">
<meta property="og:site_name" content="Kinda">
<meta property="og:description" content="VIM相关文档">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-04-04T16:26:39.000Z">
<meta property="article:modified_time" content="2022-08-22T14:23:38.743Z">
<meta property="article:author" content="Kinda Hall">
<meta property="article:tag" content="VIM">
<meta property="article:tag" content="编辑器">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>VIM-打开和搜索文件 - Kinda</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"alndaly.github.io","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":3386895327,"gtag":"G-0Q63MSHL4Z","tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('https://www.google-analytics.com/analytics.js', function() {
          window.ga = window.ga || function() { (ga.q = ga.q || []).push(arguments) };
          ga.l = +new Date;
          ga('create', '3386895327', 'auto');
          ga('send', 'pageview');
        });
      }
    </script>
  

  
    <!-- Google gtag.js -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('https://www.googletagmanager.com/gtag/js?id=G-0Q63MSHL4Z', function() {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-0Q63MSHL4Z');
        });
      }
    </script>
  

  

  

  

  



  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Kinda</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202204050048495.jpeg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="VIM-打开和搜索文件"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-04-05 00:26" pubdate>
          2022年4月5日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          8.2k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          69 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">VIM-打开和搜索文件</h1>
            
              <p class="note note-info">
                
                  
                    <!-- compatible with older versions-->
                    本文最后更新于：2022年8月22日 晚上
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h1 id="第3章-打开和搜索文件"><a href="#第3章-打开和搜索文件" class="headerlink" title="第3章 打开和搜索文件"></a>第3章 打开和搜索文件</h1><p>本章的目的是向您介绍如何在Vim中快速搜索，能够快速搜索是提高您的Vim工作效率的重要途径。当我解决了如何快速搜索文件这个问题后，我就决定改为完全使用Vim来工作。</p>
<p>本章划分为两个部分：一是如何不依赖插件搜索；二是使用<a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf.vim">fzf插件</a>搜索。让我们开始吧！</p>
<h2 id="打开和编辑文件"><a href="#打开和编辑文件" class="headerlink" title="打开和编辑文件"></a>打开和编辑文件</h2><p>要在Vim中打开一个文件，您可以使用<code>:edit</code>。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">edit</span> file.txt<br></code></pre></td></tr></table></figure>

<p>如果<code>file.txt</code>已经存在，就会打开<code>file.txt</code>buffer。如果<code>file.txt</code>不存在，会创建一个新buffer名为<code>file.txt</code>。</p>
<p><code>:edit</code>命令支持使用<code>&lt;Tab&gt;</code>进行自动补全。比如，如果您的文件位于<a target="_blank" rel="noopener" href="https://rubyonrails.org/">Rails</a>应用控制器的用户控制器目录<code>./app/controllers/users_controllers.rb</code>内，您可以使用<code>&lt;Tab&gt;</code>对文件路径名进行快速扩展。</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">:<span class="hljs-keyword">edit</span> a&lt;<span class="hljs-built_in">Tab</span>&gt;c&lt;<span class="hljs-built_in">Tab</span>&gt;u&lt;<span class="hljs-built_in">Tab</span>&gt;<br></code></pre></td></tr></table></figure>

<p><code>:edit</code>可以接收通配符参数。<code>*</code>匹配当前目录下的任意文件。如果您只想查找当前目录下后缀名为<code>.yml</code>的文件：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">:<span class="hljs-keyword">edit</span> *.yml&lt;<span class="hljs-built_in">Tab</span>&gt;<br></code></pre></td></tr></table></figure>

<p>Vim将列出当前目录下所有<code>.yml</code>文件供您选择。</p>
<p>您可以使用<code>**</code>进行递归的搜索。如果您想查找当前项目文件夹下所有<code>*.md</code>文件，但您不知道在哪个目录，您可以这样做：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">edit</span> **/*.md<span class="hljs-symbol">&lt;Tab&gt;</span><br></code></pre></td></tr></table></figure>

<p><code>:edit</code>可以用于运行<code>netrw</code>（Vim的内置文件浏览器）。使用方法是，给<code>:edit</code>一个目录参数而不是文件名就行了：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">edit</span> .<br>:<span class="hljs-built_in">edit</span> test/unit/<br></code></pre></td></tr></table></figure>

<h2 id="使用find命令搜索文件"><a href="#使用find命令搜索文件" class="headerlink" title="使用find命令搜索文件"></a>使用find命令搜索文件</h2><p>您可以使用<code>:find</code>命令搜索文件。比如：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:<span class="hljs-keyword">find</span> <span class="hljs-keyword">package</span>.json<br>:<span class="hljs-keyword">find</span> app<span class="hljs-regexp">/controllers/u</span>sers_controller.rb<br></code></pre></td></tr></table></figure>

<p><code>:find</code>命令同样支持自动补全：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">find</span> <span class="hljs-keyword">p</span><span class="hljs-symbol">&lt;Tab&gt;</span>                <span class="hljs-comment">&quot; to find package.json</span><br>:<span class="hljs-keyword">find</span> <span class="hljs-keyword">a</span><span class="hljs-symbol">&lt;Tab&gt;</span><span class="hljs-keyword">c</span><span class="hljs-symbol">&lt;Tab&gt;</span><span class="hljs-keyword">u</span><span class="hljs-symbol">&lt;Tab&gt;</span>    <span class="hljs-comment">&quot; to find app/controllers/users_controller.rb</span><br></code></pre></td></tr></table></figure>

<p>您可能注意到<code>:find</code>和<code>:edit</code>看起来很像。它们的区别是什么呢？</p>
<h2 id="Find-和-Path"><a href="#Find-和-Path" class="headerlink" title="Find 和 Path"></a>Find 和 Path</h2><p>两者的区别在于，<code>:find</code>命令根据<code>path</code>选项配置的路径查找文件，而<code>:edit</code>不会。让我们了解一点关于<code>path</code>选项的知识。一旦您学会如何修改您的路径，<code>:find</code>命令能变成一个功能强大的搜索工具。先查看一下您的<code>path</code>是什么：</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">:<span class="hljs-built_in">set</span> <span class="hljs-built_in">path</span>?<br></code></pre></td></tr></table></figure>

<p>默认情况下，您的<code>path</code>内容很可能是这样的：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">path=.,<span class="hljs-regexp">/usr/i</span>nclude,,<br></code></pre></td></tr></table></figure>

<ul>
<li><code>.</code> 意思是在当前文件所在目录下搜索。(译者注：注意不是命令行输入pwd返回的当前目录，而是 <strong>当前所打开的文件</strong> 所在的目录)</li>
<li><code>,</code> means to search in the current directory.(译者注：此处貌似作者有点小错误，逗号<code>,</code>应该是表示路径之间的分割符。连续的两个<code>,,</code>（两个逗号之间为空）才表示当前目录)</li>
<li><code>/usr/include</code> 表示在C编译器头文件目录下搜索。</li>
</ul>
<p>前两个配置非常重要，第3个现在可以被忽略。您这里应该记住的是：您可以修改您自己的路径。让我们假设您的项目结构是这样的：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">app/<br>  assets/<br>  controllers/<br>    application_controller<span class="hljs-selector-class">.rb</span><br>    comments_controller<span class="hljs-selector-class">.rb</span><br>    users_controller<span class="hljs-selector-class">.rb</span><br>    ...<br></code></pre></td></tr></table></figure>

<p>如果您想从根目录跳到<code>users_controller.rb</code>，您将不得不经过好几层目录（按好几次<code>&lt;Tab&gt;</code>）。一般说来，当您处理一个framework时，90%的时间您都在某个特定的目录下。在这种情况下，您只关心如何用最少的按键跳到<code>controllers/</code>目录。那么<code>path</code>设置可以减少这个途程。</p>
<p>您只需要将<code>app/controllers/</code>添加到当前<code>path</code>选项。以下是操作步骤：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:set path+=app<span class="hljs-regexp">/controllers/</span><br></code></pre></td></tr></table></figure>

<p>现在您的路径已经更新，当您输入<code>:find u&lt;Tab&gt;</code>时，Vim将会在<code>app/controllers/</code>目录内搜索所有以”u”开头的文件。</p>
<p>如果您有一个嵌套的目录<code>controllers/</code>，比如<code>app/controllers/account/users_controller.rb</code>，Vim就找不到<code>users_controllers</code>了。您必须改为添加<code>:set path+=app/controllers/**</code>，这样自动补全才会找到<code>users_controller.rb</code>。这太棒了！您现在可以只需要按1次键就可找到users controller。</p>
<p>您可能会想将整个项目文件夹添加到<code>path</code>中，这样当您按<code>&lt;Tab&gt;</code>，Vim将在所有文件夹内搜索您要找的文件，就像这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:<span class="hljs-built_in">set</span> path+=<span class="hljs-variable">$PWD</span>/**<br></code></pre></td></tr></table></figure>

<p><code>$PWD</code> 表示的是当前工作目录。如果您尝试将整个项目路径加到<code>path</code>中，并希望让所有文件名可以用<code>&lt;Tab&gt;</code>补全，虽然对于小项目没问题，但如果您的项目中包含大量文件时，这会显著降低您的搜索速度。我建议仅仅将您最常访问的文件&#x2F;目录添加到<code>path</code>。（译者注：不知道是不是因为系统环境不一样的原因，译者使用的是windows下的Vim8.2，$PWD 这个环境变量在译者的vim中不起作用，必须在vimrc文件中添加一句<code>let $PWD=getcwd()</code>才行）。</p>
<p>您可以将<code>set path+=&#123;您需要添加的目录&#125;</code>添加到您的vimrc文件中。更新<code>path</code>仅花费几秒钟，但可以为您的工作节省很多时间。</p>
<h2 id="使用Grep命令在文件中搜索"><a href="#使用Grep命令在文件中搜索" class="headerlink" title="使用Grep命令在文件中搜索"></a>使用Grep命令在文件中搜索</h2><p>如果您想在文件内部查找（搜索文件中的词句），您可以使用grep。Vim有两个方法可以完成这个工作：</p>
<ul>
<li>内置grep （<code>:vim</code>。没错，就是<code>:vim</code>，它是<code>:vimgrep</code>的简写）。</li>
<li>外部grep (<code>:grep</code>)。</li>
</ul>
<p>让我们首先仔细看看内置grep。<code>:vim</code>有以下语法：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:vim <span class="hljs-regexp">/pattern/</span> <span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>/pattern/</code> 是您要搜索的内容的正则表达式。</li>
<li><code>file</code> 是文件参数。您可以传入多个参数。Vim将在文件中搜索所有匹配正则表达式的内容。类似于<code>:find</code>，您可以传入*和**通配符。</li>
</ul>
<p>比如，要在<code>app/controllers/</code>目录下所有ruby文件(<code>.rb</code>)中，查找所有的”breakfast”字符串:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:vim <span class="hljs-regexp">/breakfast/</span> app<span class="hljs-regexp">/controllers/</span>**/*.rb<br></code></pre></td></tr></table></figure>

<p>输入上面的命令后，您将会被导航到第一个结果。Vim的<code>vim</code>搜索命令使用<code>quickfix</code>进行处理。要查看所有搜索结果，运行<code>:copen</code>会打开一个<code>quickfix</code>窗口。下面有一些有用的quickfix命令，可以让您提高效率：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:copen</span>        打开quickfix窗口<br><span class="hljs-symbol">:cclose</span>       关闭quickfix窗口<br><span class="hljs-symbol">:cnext</span>        跳到下一个错误<br><span class="hljs-symbol">:cprevious</span>    跳到前一个错误<br><span class="hljs-symbol">:colder</span>       跳到旧的错误列表<br><span class="hljs-symbol">:cnewer</span>       跳到新的错误列表<br></code></pre></td></tr></table></figure>

<p>要了解更多关于quickfix的信息，使用<code>:h quickfix</code>查看帮助信息。</p>
<p>您可能注意到运行内置grep(<code>:vim</code>)命令时，如果匹配结果数量较多时系统速度会变慢。这是因为Vim将每一个搜索结果读入内存。Vim加载每一个匹配的文件就像它们被编辑一样。如果Vim查到大量文件，它将消耗很多内存。</p>
<p>让我们谈谈外置grep。默认情况下，它使用终端命令<code>grep</code>。要想在<code>app/controllers/</code>目录中搜索字符串”lunch”，您可以这样做：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:<span class="hljs-keyword">grep</span> -R <span class="hljs-string">&quot;lunch&quot;</span> app<span class="hljs-regexp">/controllers/</span><br></code></pre></td></tr></table></figure>

<p>注意这里不是使用<code>/pattern/</code>，它遵循的是终端grep的语法<code>&quot;pattern&quot;</code>，它同样使用’quickfix’来显示所有的匹配结果。</p>
<p>Vim使用<code>grepprg</code>变量来决定运行<code>:grep</code>时，应该使用哪个外部程序。所以您并不是非得使用终端的<code>grep</code>命令。稍后我将为您演示如何改变外部grep程序的默认值。</p>
<h2 id="用Netrw浏览文件"><a href="#用Netrw浏览文件" class="headerlink" title="用Netrw浏览文件"></a>用Netrw浏览文件</h2><p><code>netrw</code>是Vim的内置文件浏览器，当查看项目的目录结构时很有用。要运行<code>netrw</code>，您需要在您的<code>.vimrc</code>中做以下设置：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">set</span> nocp<br>filetype <span class="hljs-keyword">plugin</span> <span class="hljs-keyword">on</span><br></code></pre></td></tr></table></figure>

<p>由于<code>netrw</code>是一个很宽泛的话题，我将紧紧介绍它的基本用法，这应该已经足够了。您可以在启动Vim时运行<code>netrw</code>，只需要传给Vim一个目录参数（而不是文件参数）就行了。比如：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim .<br>vim src<span class="hljs-regexp">/client/</span><br>vim app<span class="hljs-regexp">/controllers/</span><br></code></pre></td></tr></table></figure>

<p>要想从Vim内部运行<code>netrw</code>，您可以使用<code>:edit</code>命令，传给他一个目录而不是文件名：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">edit</span> .<br>:<span class="hljs-built_in">edit</span> src/client/<br>:<span class="hljs-built_in">edit</span> app/controllers/<br></code></pre></td></tr></table></figure>

<p>也有其他方法，不需要传递目录参数就运行<code>netrw</code>窗口：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">:Explore     从当前文件启动netrw。<br><span class="hljs-meta">:Sexplore    Sex_Plore?不是开玩笑:)，在顶部水平分割的窗口打开netrw。</span><br>:Vexplore    在左侧垂直分割的窗口打开netrw。<br></code></pre></td></tr></table></figure>

<p>您可以使用Vim动作(motions，在后面的章节中将详细讲述)在<code>netrw</code>中导航。如果您要创建、删除、重命名文件或文件夹，下面有一些关于<code>netrw</code>的有用命令：</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl"><span class="hljs-comment">%    创建新文件</span><br>d    创建新目录<br>R    重命名文件/目录<br>D    删除文件/目录<br></code></pre></td></tr></table></figure>

<p><code>:h netrw</code> 的信息非常复杂，如果您有时间可以看看。</p>
<p>如果您觉得 <code>netrw</code> 过于单调乏味，<a target="_blank" rel="noopener" href="https://github.com/tpope/vim-vinegar">vim-vinegar</a>是netrw的一个改进插件。如果您想找一个不同的文件浏览器，<a target="_blank" rel="noopener" href="https://github.com/preservim/nerdtree">NERDTree</a> 是一个很好的选择。去看看吧。</p>
<h2 id="Fzf插件"><a href="#Fzf插件" class="headerlink" title="Fzf插件"></a>Fzf插件</h2><p>您现在已经学会了如何使用Vim的内置工具去搜索文件，那么让我们学习一下如何用插件实现这些功能吧。</p>
<p>现代文本编辑器相比Vim，有一个功能设计得很好，那就是文件搜索和模糊搜索的简化。在本章的下半部分，我将向您演示如何使用<a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf.vim">fzf.vim</a>插件，在Vim中轻松实现功能强大的搜索功能。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>首先，确保您下载了<a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf">fzf</a>和<a target="_blank" rel="noopener" href="https://github.com/BurntSushi/ripgrep">ripgrep</a>。按照它们在github仓库上的指令一步步做。成功安装后，命令<code>fzf</code>和<code>rg</code>应该就可以用了。</p>
<p>Ripgrep是一个类似grep（从名字上就看得出）的搜索工具。一般说来，它比grep要快，而且还有很多有用的特性。Fzf是一个多用途的命令行模糊搜索工具，您可以讲它与其他命令联合起来使用，包括ripgrep。联合起来后，它们成为一个功能强大的搜索工具。</p>
<p>Fzf默认并不使用ripgrep，所以我们需要设置<code>FZF_DEFAULT_COMMAND</code>变量告诉fzf使用ripgrep命令。在我的<code>.zshrc</code>（如果您用bash，应该是<code>.bashrc</code>）文件内，我有以下设置：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">if</span><span class="hljs-built_in"> type </span>rg &amp;&gt; /dev/<span class="hljs-literal">null</span>; then<br>  <span class="hljs-built_in">export</span> <span class="hljs-attribute">FZF_DEFAULT_COMMAND</span>=<span class="hljs-string">&#x27;rg --files&#x27;</span><br>  <span class="hljs-built_in">export</span> <span class="hljs-attribute">FZF_DEFAULT_OPTS</span>=<span class="hljs-string">&#x27;-m&#x27;</span><br>fi<br></code></pre></td></tr></table></figure>

<p>注意<code>FZF_DEFAULT_OPTS</code>变量中的<code>-m</code>。这个设置允许我们按下<code>&lt;Tab</code>或<code>&lt;Shift-Tab&gt;</code>后进行多重选择。如果仅想让fzf在Vim中能够工作，这个设置不是必须的，但我认为这是一个有用的设置。当您想在多个文件中执行搜索和替换，进行少量修改时，它会很方便。fzf命令可以接收很多标志，但我不会再这里讲。要想了解更多信息，可以查看<a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf#usage">fzf’s 仓库</a>，或者使用<code>man fzf</code>。要想让fzf使用ripgrep，您至少得有这个设置<code>export FZF_DEFAULT_COMMAND=&#39;rg&#39;</code>。</p>
<p>安装好了fzf和ripgrep后，让我们再安装fzf的插件。在这个例子中，我使用的是<a target="_blank" rel="noopener" href="https://github.com/junegunn/vim-plug">vim-plug</a>插件管理器，当然您可以使用其他插件管理器。</p>
<p>将下列配置添加到您的<code>.vimrc</code>中。因为您需要使用<a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf.vim">fzf.vim</a>插件。（同样是由fzf的作者在维护）</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sml"><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;junegunn</span>/fzf.vim&#x27;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;junegunn</span>/fzf&#x27;, &#123; <span class="hljs-symbol">&#x27;do&#x27;</span>: &#123; -&gt; fzf#install<span class="hljs-literal">()</span> &#125; &#125;<br></code></pre></td></tr></table></figure>

<p>添加后，您需要打开vim，运行<code>:PlugInstall</code>。这条命令将会安装所有您在<code>vimrc</code>文件中定义了但尚未安装的插件。 在我的例子中，将会安装<code>fzf.vim</code>和<code>fzf</code>。</p>
<p>要了解更多关于此插件的信息，您可以查看<a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf/blob/master/README-VIM.md">fzf.vim 的仓库</a>。</p>
<h2 id="Fzf的语法"><a href="#Fzf的语法" class="headerlink" title="Fzf的语法"></a>Fzf的语法</h2><p>要想高效的使用fzf，您首先得了解一些fzf的基础语法。幸运的是，这个列表比较短：</p>
<ul>
<li><code>^</code> 表示前缀精确匹配。要搜索一个以”welcome”开头的短语：<code>^welcom</code>。</li>
<li><code>$</code> 表示后缀精确匹配。要搜索一个以”my friends”结尾的短语：<code>friends$</code>。</li>
<li><code>&#39;</code> 表示精确匹配。要搜索短语”welcom my friends”：<code>&#39;welcom my friends</code>。</li>
<li><code>|</code> 表示”或者”匹配。要搜索”friends”或”foes”：<code>friends | foes</code>。</li>
<li><code>!</code> 表示反向匹配。要搜索一个包含”welcome”但不包含”friends”的短语：<code>welcome !friends</code>。</li>
</ul>
<p>您可以混合起来使用。比如，<code>^hello | ^welcome friends$</code>将搜索以”welcome”或”hello”开头，并且以”friends”结束的短语。</p>
<h2 id="查找文件"><a href="#查找文件" class="headerlink" title="查找文件"></a>查找文件</h2><p>要想在Vim内使用fzf.vim插件搜索文件，您可以使用<code>:Files</code>方法。在Vim中运行<code>:Files</code>，您将看到fzf搜索提示符。</p>
<p>因为您将频繁地使用这个命令，最好建立一个键盘映射，我把它映射到<code>Ctrl-f</code>。在我的vimrc配置中，有这个设置：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">nnoremap &lt;silent&gt; &lt;C-f&gt; <span class="hljs-symbol">:Files&lt;CR&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="在文件中查找"><a href="#在文件中查找" class="headerlink" title="在文件中查找"></a>在文件中查找</h2><p>要想在文件内部搜索，您可以使用<code>:Rg</code>命令。</p>
<p>同样，因为您可能将频繁的使用这个命令，让我们给它一个键盘映射。我的映射在<code>&lt;Leader&gt;f</code>。</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">nnoremap &lt;silent&gt; &lt;<span class="hljs-title class_">Leader</span>&gt;f <span class="hljs-symbol">:Rg&lt;CR&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="其他搜索"><a href="#其他搜索" class="headerlink" title="其他搜索"></a>其他搜索</h2><p>Fzf.vim提供了许多其他命令。这里我不会一个个仔细讲，您可以去<a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf.vim#commands">这里</a>查看更多信息。</p>
<p>这是我的fzf键盘映射：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml">nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>b :Buffers<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">C-f</span>&gt;</span> :Files<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>f :Rg<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>/ :BLines<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>&#x27; :Marks<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>g :Commits<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>H :Helptags<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>hh :History<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>h: :History:<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>h/ :History/<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="将Grep替换为Rg"><a href="#将Grep替换为Rg" class="headerlink" title="将Grep替换为Rg"></a>将Grep替换为Rg</h2><p>正如前面提到的，Vim有两种方法在文件内搜索：<code>:vim</code>和<code>:grep</code>。您可以使用<code>grepprg</code>这个关键字重新指定<code>:grep</code>使用的外部搜索工具。我将向您演示如何设置Vim，使得当运行<code>:grep</code>命令时，使用ripgrep代替终端的grep。</p>
<p>现在，让我们设置<code>grepprg</code>来使<code>:grep</code>使用ripgrep。将下列设置添加到您的vimrc：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">set</span> grepprg=rg\ <span class="hljs-params">--vimgrep</span>\ <span class="hljs-params">--smart-case</span>\ <span class="hljs-params">--follow</span><br></code></pre></td></tr></table></figure>

<p>上面的一些选项可以随意修改！要想了解更多关于这些选项的含义，请使用<code>man rg</code>了解详情。</p>
<p>当您更新<code>grepprg</code>选项后，现在当您运行<code>:grep</code>，它将实际运行<code>rg --vimgrep --smart-case --follow</code>而不是<code>grep</code>。如果您想使用ripgrep搜索”donut”，您可以运行一条更简洁的命令<code>:grep &quot;donut&quot;</code>，而不是<code>:grep &quot;donut&quot; . -R</code></p>
<p>就像老的<code>:grep</code>一样，新的<code>:grep</code>同样使用quickfix窗口来显示结果。</p>
<p>您可能好奇，“很好，但我从没在Vim中使用过<code>:grep</code>，为什么我不能直接使用<code>:Rg</code>命令在文件中搜索呢？究竟什么时候我必须使用<code>:grep</code>？”。</p>
<p>这个问题问得很好。在Vim中，当您需要在多个文件中执行搜索和替换时，您可能必须使用<code>:grep</code>这个命令。我马上就会讲这个问题。</p>
<h2 id="在多文件中搜索和替换"><a href="#在多文件中搜索和替换" class="headerlink" title="在多文件中搜索和替换"></a>在多文件中搜索和替换</h2><p>现代文本编辑器，比如VSCode中，在多个文件中搜索和替换一个字符串是很简单的事情。在这一节，我将向您演示如何在Vim中轻松实现这个。</p>
<p>第一个方法是在您的项目中替换 <strong>所有</strong> 的匹配短句。您得使用<code>:grep</code>命令。如果您想将所有”pizza”替换为”donut”，下面是操作方法：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:<span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;pizza&quot;</span><br>:cfdo %s<span class="hljs-regexp">/pizza/</span>donut/g | update<br></code></pre></td></tr></table></figure>

<p>让我们来分析一下这条命令：</p>
<ol>
<li><code>:grep pizza</code>使用ripgrep去搜索所有”pizza”（顺带说一句，就算您不给<code>grepprg</code>重新赋值让它使用ripgrep，这条命令依然有效，但您可能不得不使用<code>:grep &quot;pizza&quot; . -R</code>命令，而不是<code>:grep &quot;pizza&quot;</code>）。</li>
<li><code>:cfdo</code>会在您的quickfix列表中所有文件里，执行您传递给它的命令。在这个例子中，您的命令是一条替换命令<code>%s/pizza/donut/g</code>。管道符号(<code>|</code>)是一个链接操作符。命令<code>update</code>在每个文件被替换后，立刻保存。在后面的章节中，我将深入介绍替换命令。</li>
</ol>
<p>第二个方法是在您选择文件中执行搜索和替换。用这个方法，您可以手动选择您想执行搜索和替换的文件。下面是操作方法：</p>
<ol>
<li>首先清空您的buffer。让您的buffer列表仅包含您所需要的文件，这一点很有必要。您可以重启Vim，也可以运行<code>:%bd | e#</code>命令（<code>%bd</code>关闭所有buffer，而<code>e#</code>打开您当前所在的文件）。</li>
<li>运行<code>:Files</code>。</li>
<li>选择好您想搜索-替换的文件。要选择多个文件，使用<code>&lt;Tab&gt;</code>或<code>&lt;Shift-Tab&gt;</code>。当然，您必须使多文件标志(<code>-m</code>)位于<code>FZF_DEFAULT_OPTS</code>中。</li>
<li>运行<code>:bufdo %s/pizza/donut/g | update</code>。命令<code>:bufdo %s/pizza/donut/g | update</code>看起来和前面的<code>:cfdo %s/pizza/donut/g | update</code>很像，区别在于，(<code>:cfdo</code>)替换所有quickfix中的实体，而(<code>:bufdo</code>)替换所有buffer中的实体。</li>
</ol>
<h2 id="用聪明的方法学习搜索"><a href="#用聪明的方法学习搜索" class="headerlink" title="用聪明的方法学习搜索"></a>用聪明的方法学习搜索</h2><p>在文本编辑时，搜索是一个很实用的技巧。学会在Vim中如何搜索，将显著提高您的文本编辑工作流程效率。</p>
<p>Fzf.vim插件就像一个游戏规则改变者。我无法想象使用Vim没有它的情景。当最开始使用Vim时，如果有一个好的搜索工具，我想是非常重要的。我看见很多人过渡到Vim时的艰难历程，就是因为Vim缺少了现代编辑器所拥有的一些关键功能特性，比如简单快捷且功能强大的搜索功能。我希望本章将帮助您更轻松地向Vim过渡。</p>
<p>您同时也看到了Vim的扩展性，即使用插件或外部程序扩展搜索功能的能力。将来，记住您想在Vim中拓展的功能。很有可能已经有人写好了相关插件，已经有现成的程序了。下一章，您将学习Vim中非常重要的主题：Vim语法。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%8A%80%E6%9C%AF/" class="category-chain-item">技术</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/VIM/">#VIM</a>
      
        <a href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/">#编辑器</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>VIM-打开和搜索文件</div>
      <div>https://alndaly.github.io/2022/04/05/Vim/ch03_searching_files/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Kinda Hall</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年4月5日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/04/05/Vim/ch24_vim_runtime/" title="VIM-Vim Rumtime">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">VIM-Vim Rumtime</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/04/05/Vim/ch05_moving_in_file/" title="VIM-在文件中移动">
                        <span class="hidden-mobile">VIM-在文件中移动</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'Alndaly/alndaly.github.io');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <span>Life</span> <i class="iconfont icon-love"></i> <span>Kinda</span> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
