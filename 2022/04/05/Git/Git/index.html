

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Kinda Hall">
  <meta name="keywords" content="个人博客, Personal Blog">
  
    <meta name="description" content="Git相关文档">
<meta property="og:type" content="article">
<meta property="og:title" content="Git基本操作">
<meta property="og:url" content="https://alndaly.github.io/2022/04/05/Git/Git/index.html">
<meta property="og:site_name" content="Kinda">
<meta property="og:description" content="Git相关文档">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/21452414-8619843d359e464a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/21452414-934dca2c8cf7697e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/21452414-660b9a45ac97a052.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/21452414-6a040fe5e32e04e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/21452414-9da314cc6a740f47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/21452414-9803aaf3afe72e31.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/20220405171749.md">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:0c5257d5-ff01-4014-af12-faf2aec53cc3/01.svg?cdnVersion=116">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:8d616ece-8cee-4fde-bdee-4b280a0a8334/01%20git-sequence-transparent%20kopiera.png?cdnVersion=116">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:f45c4a34-8968-4c81-83cf-d55ebf01a447/02%20git-checkout-transparent%20kopiera.png?cdnVersion=116">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:e8a43261-2460-4783-9731-1197dc8959ab/03-04%20Reset%20a%20specific%20commit.png?cdnVersion=116">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:7dffc21e-29c6-4bfd-acd1-2965fcdd923e/05-06%20Checkout%20old%20commits.png?cdnVersion=116">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:9b4d9562-7ed1-441c-bbd1-1897bea5676e/07.svg?cdnVersion=116">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:f02c67ca-d7b8-47f8-98f8-e0017dc9f7c5/08-09%20Undo%20public%20commits.svg?cdnVersion=116">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:1a010f5a-c90d-49ee-a0e6-31054433e2d4/07.svg?cdnVersion=116">
<meta property="og:image" content="https://wac-cdn.atlassian.com/dam/jcr:cc252fc0-fc76-4740-8458-9c0d7af94bca/08.svg?cdnVersion=116">
<meta property="article:published_time" content="2022-04-05T09:18:27.000Z">
<meta property="article:modified_time" content="2022-05-28T16:57:14.076Z">
<meta property="article:author" content="Kinda Hall">
<meta property="article:tag" content="git">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/21452414-8619843d359e464a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200">
  
  
  
  <title>Git基本操作 - Kinda</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"alndaly.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":3386895327,"gtag":"G-0Q63MSHL4Z","tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Kinda</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202204050048495.jpeg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Git基本操作"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-04-05 17:18" pubdate>
          2022年4月5日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          18k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          155 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Git基本操作</h1>
            
              <p class="note note-info">
                
                  
                    <!-- compatible with older versions-->
                    本文最后更新于：2022年5月29日 凌晨
                  
                
              </p>
            
            <div class="markdown-body">
              
              <h1 id="Git-安装"><a href="#Git-安装" class="headerlink" title="Git 安装"></a>Git 安装</h1><p>Git 可以在 Git 官网下载，目前 Git 支持 Windows 和 Mac， 按默认选项安装即可。(不清楚下载地方的可以关注私信我)</p>
<p>安装教程可参照 廖雪峰老师的安装教程。</p>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><p><code>git config</code><br>在git中，使用<code>git config</code> 命令来配置 git 的配置文件，git配置级别主要有3类：<br>1、仓库级别 local 本地 Git 仓库级别配置文件，作用于当前仓库。【优先级最高】<br>2、用户级别 global，全局配置文件，作用于所有用户。【优先级次之】<br>3、系统级别 system，作用于系统所有用户和所有库。【优先级最低】<br><code>git config -l</code> 查看所有的配置信息，依次是系统级别、用户级别、仓库级别<br><code>git config --local -l</code> 查看仓库配置<br><code>git config --global -l</code> 查看用户配置<br><code>git config --system -l</code> 查看系统配置<br><code>git config</code> 添加配置文件<br><code>git config --global user.email “You Email”</code><br><code>git config --global user.name “Your Name”</code><br><code>git config -e </code>编辑配置文件<br><code>git config --local -e</code> 编辑仓库级别配置文件<br><code>git config --global -e</code> 编辑用户级别配置文件<br><code>git config --system -e</code> 编辑系统级别配置文件<br><code>git clone</code><br><code>git clone</code> 复制仓库到新的目录<br><code>git fetch</code><br><code>git fetch</code> 创建并更新本地远程分支<br><code>git fetch origin</code> 手动指定要 fetch 的 remote,在不指定分支时通常默认为 master；<br><code>git fetch origin master:temp</code> 如在本地新建一个temp分支，并将远程 origin 仓库的 master 分支代码下载到本地 temp 分支<br><code>git diff temp</code> 比较本地代码与刚刚从远程下载下来的代码的区别<br><code>git merge temp</code> 合并代码<br><code>git branch -d temp</code> 不想要 tmp 分支，删除分支<br><code>git pull</code><br><code>git pull</code> 将更新从远程仓库合并到当前分支。在默认模式下，<code>git pull</code> &#x3D;&#x3D; <code>git fetch</code> + <code>git merge</code>。<br><code>git pull</code> :</p>
<p>如 <code>git pull origin master</code></p>
<p><code>git pull </code>取回远程仓库某个分支的更新，再与本地的指定分支自动合并，可能会出现代码冲突。</p>
<p><code>git fetch</code> 先获取远程仓库某个分支的更新，再执行 merge，相比 pull ，fetch 更可控。</p>
<p><code>git add</code></p>
<p><code>git add -A</code> 添加所有文件到暂存区</p>
<p><code>git add -u</code> 添加被修改(modified)和被删除(deleted)文件到暂存区，不包括新文件(new)</p>
<p><code>git add .</code> 添加新文件(new)和被修改(modified)文件到暂存区，不包括被删除(deleted)文件</p>
<p>可以通过 <code>git status</code> 检查文件是否已添加完毕。</p>
<p><code>git commit</code></p>
<p><code>git commit -m</code> “” 比较常见的用法，-m “填写更新记录”</p>
<p><code>git commit -a -m</code> “” 提交所有已跟踪的执行修改或删除、新建的文件，即使没有执行 git add 添加到暂存区的文件。</p>
<p><code>git commit --amend</code> 修改上一次提交，可以在不增加新的 commit-id 的情况下将新修改的代码追加到前一次 commit-id 中。如不小心提交了一版没有修改完成的版本上去，</p>
<p>还需要修改完善后再提交，又不想再次增加一个 commit-id 时，可以使用追加提交。</p>
<p><code>git commit --help</code> 查看帮助</p>
<p><code>git push</code></p>
<p><code>git push </code>将已经 commit 的文件推送到远程仓库的分支</p>
<p><code>git push origin master</code> 推送到 master 分支</p>
<p><code>git push --all origin</code> 推送本地仓库所有分支到远程仓库分支</p>
<p><code>git push origin :master</code> 删除远程分支，等同于 <code>git push origin --delete master</code></p>
<p><code>git push -u origin master </code>将本地的 master 分支推送到 origin 主机，同时指定 origin 为默认主机。</p>
<p><code>git remote</code></p>
<p><code>git remote -v</code> 查看远程仓库地址</p>
<p><code>git remote set-url origin</code> 修改远程仓库地址</p>
<p><code>git remote rm origin</code> 删除远程仓库地址</p>
<p><code>git remote add origin [url]</code> 添加远程仓库地址</p>
<p><code>git merge</code></p>
<p><code>git merge</code> 合并代码</p>
<p><code>git merge --no-commit</code> 防止合并失败不自动提交</p>
<p><code>git merge --no-ff</code> 不使用fast-forward方式合并，创建一个 merge 的 commit 信息。</p>
<p>一、版本回退<br>我们用readme文件举例子，修改好内容之后，重新提交<br><code>git add readme.txt</code><br><code>git commit -m &quot;说明&quot;</code>  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/21452414-8619843d359e464a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200" srcset="/img/loading.gif" lazyload></p>
<p>返回结果<br>我们可以多修改几次，来试一下版本回退功能  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/21452414-934dca2c8cf7697e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200" srcset="/img/loading.gif" lazyload></p>
<p>修改之后的git log,按Q推出</p>
<p>回到上一个版本<code>git reset --hard HEAD^</code>  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/21452414-660b9a45ac97a052.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200" srcset="/img/loading.gif" lazyload><br>终端截图<br><img src="https://upload-images.jianshu.io/upload_images/21452414-6a040fe5e32e04e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200" srcset="/img/loading.gif" lazyload></p>
<p>cat命令查看文件内容</p>
<p>以此类推回到上上个版本就是<code>git reset --hard HEAD^^</code><br>当往上的版本比较多，比如往上50个版本的时候我们用<code>git reset --hard HEAD~50</code></p>
<p>退回以后出现一个奇怪的事情，我们再执行<code>git log</code>命令发现看不到第三版了  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/21452414-9da314cc6a740f47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200" srcset="/img/loading.gif" lazyload></p>
<p>git log结果</p>
<p>这时，我们想要回到第三版需要用以下命令来<br><code>git rest hard 63ef</code><br><code>63ef</code>是第三次提交时的版本号，我们没必要去写全，git会自动检索，但也不能只写一两位。因为版本号多了会有重复的。  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/21452414-9803aaf3afe72e31.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200" srcset="/img/loading.gif" lazyload></p>
<p>恢复到第三版</p>
<ul>
<li>问题①:如果我们没有记录被恢复版本的版本号,怎么找回呢?</li>
</ul>
<p>Git提供了一个命令<code>git reflog</code>,通过这个命令我们可以看到每次git的操作记录</p>
<ul>
<li>问题②:如果我们通过git回到第一版,那么<code>git log</code>命令还能看到第二版吗?</li>
</ul>
<p>小结:</p>
<ul>
<li><p>HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令<code>git reset --hard commit_id</code></p>
</li>
<li><p>穿梭前，用git log可以查看提交历史，以便确定要回退到哪个版本。</p>
</li>
<li><p>要重返未来，用git reflog查看命令历史，以便确定要回到未来的哪个版本。</p>
</li>
</ul>
<p><strong>直接拉取并覆盖本地的所有代码</strong><br>两个电脑同时对git上的项目进行跟新时，不免要用到将git上的代码拉取到本地更新本地代码的操作，鉴于自己对git使用的还不是很熟练，所以就直接采取暴力的方法，直接拉取并覆盖本地的所有代码，命令如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">git fetch --all<br>git reset --hard origin/master<br>git pull<br></code></pre></td></tr></table></figure>

<h1 id="Difference-between-and"><a href="#Difference-between-and" class="headerlink" title="Difference between ^ and ~"></a>Difference between ^ and ~</h1><h2 id="Rules-of-thumb"><a href="#Rules-of-thumb" class="headerlink" title="Rules of thumb"></a>Rules of thumb</h2><ul>
<li>Use <code>~</code> most of the time — to go back a number of generations, usually what you want</li>
<li>Use <code>^</code> on merge commits — because they have two or more (immediate) parents</li>
</ul>
<p>Mnemonics:</p>
<ul>
<li>Tilde <code>~</code> is almost linear in appearance and wants to go backward in a straight line</li>
<li>Caret <code>^</code> suggests an interesting segment of a tree or a fork in the road</li>
</ul>
<h2 id="Tilde"><a href="#Tilde" class="headerlink" title="Tilde"></a>Tilde</h2><p>The <a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-rev-parse#Documentation/git-rev-parse.txt-emltrevgtltngtemegemmaster3em">“Specifying Revisions” section of the <code>git rev-parse</code> documentation</a> defines <code>~</code> as</p>
<blockquote>
<p><strong><code>&lt;rev&gt;~&lt;n&gt;</code>, e.g. <code>master~3</code></strong><br>A suffix <code>~&lt;n&gt;</code> to a revision parameter means the commit object that is the _n_thgeneration ancestor of the named commit object, following only the first parents. For example, <code>&lt;rev&gt;~3</code> is equivalent to <code>&lt;rev&gt;^^^</code> which is equivalent to <code>&lt;rev&gt;^1^1^1</code> …</p>
</blockquote>
<p>You can get to parents of any commit, not just <code>HEAD</code>. You can also move back through generations: for example, <code>master~2</code> means the grandparent of the tip of the master branch, favoring the first parent on merge commits.</p>
<h2 id="Caret"><a href="#Caret" class="headerlink" title="Caret"></a>Caret</h2><p>Git history is nonlinear: a directed acyclic graph (DAG) or tree. For a commit with only one parent, <code>rev~</code> and <code>rev^</code> mean the same thing. The caret selector becomes useful with merge commits because each one is the child of two or more parents — and strains language borrowed from biology.</p>
<p><code>HEAD^</code> means the first <em>immediate</em> parent of the tip of the current branch. <code>HEAD^</code> is short for <code>HEAD^1</code>, and you can also address <code>HEAD^2</code> and so on as appropriate. The <a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-rev-parse#Documentation/git-rev-parse.txt-emltrevgtemegemHEADv1510em">same section of the <code>git rev-parse</code> documentation</a> defines it as</p>
<blockquote>
<p><strong><code>&lt;rev&gt;^</code>, <em>e.g.</em> <code>HEAD^</code>, <code>v1.5.1^0</code></strong><br>A suffix <code>^</code> to a revision parameter means the first parent of that commit object. <code>^&lt;n&gt;</code>means the _n_th parent ([<em>e.g.</em>] <code>&lt;rev&gt;^</code> is equivalent to <code>&lt;rev&gt;^1</code>). As a special rule, <code>&lt;rev&gt;^0</code> means the commit itself and is used when <code>&lt;rev&gt;</code> is the object name of a tag object that refers to a commit object.</p>
</blockquote>
<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><p>These specifiers or selectors can be chained arbitrarily, <em>e.g.</em>, <code>topic~3^2</code> in English is the second parent of the merge commit that is the great-grandparent (three generations back) of the current tip of the branch <code>topic</code>.</p>
<p>The <a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-rev-parse#_specifying_revisions">aforementioned section of the <code>git rev-parse</code> documentation</a> traces many paths through a notional git history. Time flows generally downward. Commits D, F, B, and A are merge commits.</p>
<blockquote>
<p>Here is an illustration, by Jon Loeliger. Both commit nodes B and C are parents of commit node A. Parent commits are ordered left-to-right. (N.B. The <code>git log --graph</code> command displays history in the opposite order.)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sh">G   H   I   J<br>\ /     \ /<br>D   E   F<br>\  |  / \<br> \ | /   |<br>  \|/    |<br>   B     C<br>    \   /<br>     \ /<br>      A<br><br>A =      = A^0<br>B = A^   = A^1     = A~1<br>C = A^2<br>D = A^^  = A^1^1   = A~2<br>E = B^2  = A^^2<br>F = B^3  = A^^3<br>G = A^^^ = A^1^1^1 = A~3<br>H = D^2  = B^^2    = A^^^2  = A~2^2<br>I = F^   = B^3^    = A^^3^<br>J = F^2  = B^3^2   = A^^3^2<br></code></pre></td></tr></table></figure>
</blockquote>
<p>Run the code below to create a git repository whose history matches the quoted illustration.</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/env perl</span><br><br><span class="hljs-keyword">use</span> strict;<br><span class="hljs-keyword">use</span> warnings;<br><span class="hljs-keyword">use</span> subs <span class="hljs-keyword">qw</span>/ postorder /;<br><span class="hljs-keyword">use</span> File::Temp <span class="hljs-keyword">qw</span>/ mkdtemp /;<br><br><span class="hljs-keyword">my</span> %sha1;<br><span class="hljs-keyword">my</span> %parents = (<br>  <span class="hljs-string">A =&gt;</span> [ <span class="hljs-keyword">qw</span>/ B C /               ],<br>  <span class="hljs-string">B =&gt;</span> [ <span class="hljs-keyword">qw</span>/     D E F /         ],<br>  <span class="hljs-string">C =&gt;</span> [ <span class="hljs-keyword">qw</span>/         F /         ],<br>  <span class="hljs-string">D =&gt;</span> [ <span class="hljs-keyword">qw</span>/           G H /     ],<br>  <span class="hljs-string">F =&gt;</span> [ <span class="hljs-keyword">qw</span>/               I J / ],<br>);<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">postorder</span> </span>&#123;<br>  <span class="hljs-keyword">my</span>($root,$hash) = @_;<br>  <span class="hljs-keyword">my</span> @parents = @&#123; $parents&#123;$root&#125; || [] &#125;;<br>  postorder($_, $hash) <span class="hljs-keyword">for</span> @parents;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> $sha1&#123;$root&#125;;<br>  @parents = <span class="hljs-keyword">map</span> <span class="hljs-string">&quot;-p $sha1&#123;$_&#125;&quot;</span>, @parents;<br>  <span class="hljs-keyword">chomp</span>($sha1&#123;$root&#125; = <span class="hljs-string">`git commit-tree @parents -m &quot;$root&quot; $hash`</span>);<br>  <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git commit-tree failed&quot;</span> <span class="hljs-keyword">if</span> $?;<br>  <span class="hljs-keyword">system</span>(<span class="hljs-string">&quot;git tag -a -m &#x27;$sha1&#123;$root&#125;&#x27; &#x27;$root&#x27; &#x27;$sha1&#123;$root&#125;&#x27;&quot;</span>) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git tag failed&quot;</span>;<br>&#125;<br><br>$0 =~ s!^.*<span class="hljs-regexp">/!!;  # /</span> fix Stack Overflow highlighting<br><span class="hljs-keyword">my</span> $repo = mkdtemp <span class="hljs-string">&quot;repoXXXXXXXX&quot;</span>;<br><span class="hljs-keyword">chdir</span> $repo <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: chdir: $!&quot;</span>;<br><span class="hljs-keyword">system</span>(<span class="hljs-string">&quot;git init&quot;</span>) == <span class="hljs-number">0</span>               <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git init failed&quot;</span>;<br><span class="hljs-keyword">chomp</span>(<span class="hljs-keyword">my</span> $tree = <span class="hljs-string">`git write-tree`</span>);      <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git write-tree failed&quot;</span> <span class="hljs-keyword">if</span> $?;<br><br>postorder <span class="hljs-string">&#x27;A&#x27;</span>, $tree;<br><span class="hljs-keyword">system</span> <span class="hljs-string">&quot;git update-ref HEAD   $sha1&#123;A&#125;&quot;</span>; <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git update-ref failed&quot;</span> <span class="hljs-keyword">if</span> $?;<br><span class="hljs-keyword">system</span> <span class="hljs-string">&quot;git update-ref master $sha1&#123;A&#125;&quot;</span>; <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git update-ref failed&quot;</span> <span class="hljs-keyword">if</span> $?;<br><br><span class="hljs-comment"># for browsing history - http://blog.kfish.org/2010/04/git-lola.html</span><br><span class="hljs-keyword">system</span> <span class="hljs-string">&quot;git config alias.lol  &#x27;log --graph --decorate --pretty=oneline --abbrev-commit&#x27;&quot;</span>;<br><span class="hljs-keyword">system</span> <span class="hljs-string">&quot;git config alias.lola &#x27;log --graph --decorate --pretty=oneline --abbrev-commit --all&#x27;&quot;</span>;<br></code></pre></td></tr></table></figure>

<p>It adds aliases in the new throwaway repo only for <a target="_blank" rel="noopener" href="http://blog.kfish.org/2010/04/git-lola.html"><code>git lol</code> and <code>git lola</code></a> so you can view history as in</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git lol<br>*   29392c8 (HEAD -&gt; master, tag: A) A<br>|\<br>| * a1ef6fd (tag: C) C<br>| |<br>|  \<br>*-. \   8ae20e9 (tag: B) B<br>|\ \ \<br>| | |/<br>| | *   03160db (tag: F) F<br>| | |\<br>| | | * 9df28cb (tag: J) J<br>| | * 2afd329 (tag: I) I<br>| * a77cb1f (tag: E) E<br>*   cd75703 (tag: D) D<br>|\<br>| * 3043d25 (tag: H) H<br>* 4ab0473 (tag: G) G<br></code></pre></td></tr></table></figure>

<p>Note that on your machine the SHA-1 object names will differ from those above, but the tags allow you to address commits by name and check your understanding.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git <span class="hljs-built_in">log</span> -1 --format=%f $(git rev-parse A^)<br>B<br>$ git <span class="hljs-built_in">log</span> -1 --format=%f $(git rev-parse A~^3~)<br>I<br>$ git <span class="hljs-built_in">log</span> -1 --format=%f $(git rev-parse A^2~)<br>F<br></code></pre></td></tr></table></figure>

<p>The <a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-rev-parse#_specifying_revisions">“Specifying Revisions” in the <code>git rev-parse</code> documentation</a> is full of great information and is worth an in-depth read. See also <a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection">Git Tools - Revision Selection</a> from the book <a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2/"><em>Pro Git</em></a>.</p>
<h2 id="Order-of-Parent-Commits"><a href="#Order-of-Parent-Commits" class="headerlink" title="Order of Parent Commits"></a>Order of Parent Commits</h2><p>The commit <a target="_blank" rel="noopener" href="https://github.com/git/git/commit/89e4fcb0dd01b42e82b8f27f9a575111a26844df">89e4fcb0dd</a> from git’s own history is a merge commit, as <code>git show 89e4fcb0dd</code>indicates with the Merge header line that displays the immediate ancestors’ object names.</p>
<blockquote>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">commit 89e4fcb0dd01b42e82b8f27f9a575111a26844df<br>Merge: c670b1f876 649bf3a42f b67d40adbb<br>Author: Junio C Hamano &lt;gitster@pobox.com&gt;<br>Date:   Mon Oct 29 10:15:31 2018 +0900<br><br> Merge branches <span class="hljs-string">&#x27;bp/reset-quiet&#x27;</span> and <span class="hljs-string">&#x27;js/mingw-http-ssl&#x27;</span> into nd/config-split […]<br></code></pre></td></tr></table></figure>
</blockquote>
<p>We can confirm the ordering by asking <code>git rev-parse</code> to show 89e4fcb0dd’s immediate parents in sequence.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git rev-parse 89e4fcb0dd^1 89e4fcb0dd^2 89e4fcb0dd^3<br>c670b1f876521c9f7cd40184bf7ed05aad843433<br>649bf3a42f344e71b1b5a7f562576f911a1f7423<br>b67d40adbbaf4f5c4898001bf062a9fd67e43368<br></code></pre></td></tr></table></figure>

<p>Querying the non-existent fourth parent results in an error.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git rev-parse 89e4fcb0dd^4<br>89e4fcb0dd^4<br>fatal: ambiguous argument <span class="hljs-string">&#x27;89e4fcb0dd^4&#x27;</span>: unknown revision or path not <span class="hljs-keyword">in</span> the working tree.<br>Use <span class="hljs-string">&#x27;--&#x27;</span> to separate paths from revisions, like this:<br><span class="hljs-string">&#x27;git &lt;command&gt; [&lt;revision&gt;...] -- [&lt;file&gt;...]&#x27;</span><br></code></pre></td></tr></table></figure>

<p>If you want to extract the parents only, use <a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-log#_pretty_formats">pretty format</a> <code>%P</code> for the full hashes</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git <span class="hljs-built_in">log</span> -1 --pretty=%P 89e4fcb0dd<br>c670b1f876521c9f7cd40184bf7ed05aad843433 649bf3a42f344e71b1b5a7f562576f911a1f7423 b67d40adbbaf4f5c4898001bf062a9fd67e43368<br></code></pre></td></tr></table></figure>

<p>or <code>%p</code> for abbreviated parents.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git <span class="hljs-built_in">log</span> -1 --pretty=%p 89e4fcb0dd<br>c670b1f876 649bf3a42f b67d40adbb<br></code></pre></td></tr></table></figure>

<h1 id="个性化自定义git命令别名"><a href="#个性化自定义git命令别名" class="headerlink" title="个性化自定义git命令别名"></a>个性化自定义git命令别名</h1><p>文件名：.gitconfig_1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs note">[init]<br>	defaultBranch = main<br>[user]<br>	name = Alndaly<br>	email = 1142704468@qq.com<br>[filter &quot;lfs&quot;]<br>	clean = git-lfs clean -- %f<br>	smudge = git-lfs smudge -- %f<br>	process = git-lfs filter-process<br>	required = true<br>[alias] <br>	lm = log --color --date=format:&#x27;%Y-%m-%d %H:%M:%S&#x27; --author=&#x27;Alndaly&#x27; --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%C(cyan) %s %Cgreen(%cd) %C(bold white)&lt;%an&gt;%Creset&#x27; --abbrev-commit --graph<br>	ls = log --color --date=format:&#x27;%Y-%m-%d %H:%M:%S&#x27; --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%C(cyan) %s %Cgreen(%cd) %C(bold white)&lt;%an&gt;%Creset&#x27; --abbrev-commit --graph<br></code></pre></td></tr></table></figure>
<p>文件名：.gitconfig_2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs note">[init]<br>	defaultBranch = main<br>[user]<br>	name = Smiling22<br>	email = lucky.always.h@gmail.com<br>[filter &quot;lfs&quot;]<br>	clean = git-lfs clean -- %f<br>	smudge = git-lfs smudge -- %f<br>	process = git-lfs filter-process<br>	required = true<br>[alias] <br>	lm = log --color --date=format:&#x27;%Y-%m-%d %H:%M:%S&#x27; --author=&#x27;Alndaly&#x27; --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%C(cyan) %s %Cgreen(%cd) %C(bold white)&lt;%an&gt;%Creset&#x27; --abbrev-commit --graph<br>	ls = log --color --date=format:&#x27;%Y-%m-%d %H:%M:%S&#x27; --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%C(cyan) %s %Cgreen(%cd) %C(bold white)&lt;%an&gt;%Creset&#x27; --abbrev-commit --graph<br></code></pre></td></tr></table></figure>


<h2 id="The-default-branch-has-been-renamed-（当远程分支改了名字）"><a href="#The-default-branch-has-been-renamed-（当远程分支改了名字）" class="headerlink" title="The default branch has been renamed!（当远程分支改了名字）"></a>The default branch has been renamed!（当远程分支改了名字）</h2><p>main is now named master</p>
<p>If you have a local clone, you can update it by running the following commands.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch -m main master<br>git fetch origin<br>git branch -u origin/master master<br>git remote set-head origin -a<br></code></pre></td></tr></table></figure>

<p>![GitFlow Workflow](&#x2F;Users&#x2F;alnda&#x2F;Developer&#x2F;hexo-blog&#x2F;source&#x2F;_posts&#x2F;Git&#x2F;GitFlow Workflow.md)<br><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/20220405171749.md" srcset="/img/loading.gif" lazyload alt="Forking Workflow"></p>
<h1 id="Resetting-Checking-Out-amp-Reverting"><a href="#Resetting-Checking-Out-amp-Reverting" class="headerlink" title="Resetting, Checking Out &amp; Reverting"></a>Resetting, Checking Out &amp; Reverting</h1><p>The <code>[git reset](https://www.atlassian.com/git/tutorials/undoing-changes/git-reset)</code>, <code>[git checkout](https://www.atlassian.com/git/tutorials/using-branches/git-checkout)</code>, and <code>[git revert](https://www.atlassian.com/git/tutorials/undoing-changes/git-revert)</code> commands are some of the most useful tools in your Git toolbox. They all let you undo some kind of change in your repository, and the first two commands can be used to manipulate either commits or individual files.</p>
<p>Because they’re so similar, it’s very easy to mix up which command should be used in any given development scenario. In this article, we’ll compare the most common configurations of <code>git reset</code>, <code>git checkout</code>, and <code>git revert</code>. Hopefully, you’ll walk away with the confidence to navigate your repository using any of these commands.</p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:0c5257d5-ff01-4014-af12-faf2aec53cc3/01.svg?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="The three trees of Git"></p>
<p>It helps to think about each command in terms of their effect on the three state management mechanisms of a Git repository: the working directory, the staged snapshot, and the commit history. These components are sometimes known as “The three trees” of Git. We explore the three trees in depth on the <code>[git reset](https://www.atlassian.com/git/tutorials/undoing-changes/git-reset)</code> page. Keep these mechanisms in mind as you read through this article.</p>
<p>A checkout is an operation that moves the <code>HEAD</code> ref pointer to a specified commit. To demonstrate this consider the following example.</p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:8d616ece-8cee-4fde-bdee-4b280a0a8334/01%20git-sequence-transparent%20kopiera.png?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="Move the HEAD ref pointer to a specified commit"></p>
<p>This example demonstrates a sequence of commits on the <code>main</code> branch. The <code>HEAD</code> ref and <code>main</code> branch ref currently point to commit d. Now let us execute <code>git checkout b</code></p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:f45c4a34-8968-4c81-83cf-d55ebf01a447/02%20git-checkout-transparent%20kopiera.png?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="Sequence of commits on the master branch"></p>
<p>This is an update to the “Commit History” tree. The <code>git checkout</code> command can be used in a commit, or file level scope. A file level checkout will change the file’s contents to those of the specific commit.</p>
<p>A revert is an operation that takes a specified commit and creates a new commit which inverses the specified commit. <code>git revert</code>can only be run at a commit level scope and has no file level functionality.</p>
<p>A reset is an operation that takes a specified commit and resets the “three trees” to match the state of the repository at that specified commit. A reset can be invoked in three different modes which correspond to the three trees.</p>
<p>Checkout and reset are generally used for making local or private ‘undos’. They modify the history of a repository that can cause conflicts when pushing to remote shared repositories. Revert is considered a safe operation for ‘public undos’ as it creates new history which can be shared remotely and doesn’t overwrite history remote team members may be dependent on.</p>
<h2 id="Git-Reset-vs-Revert-vs-Checkout-reference"><a href="#Git-Reset-vs-Revert-vs-Checkout-reference" class="headerlink" title="Git Reset vs Revert vs Checkout reference"></a>Git Reset vs Revert vs Checkout reference</h2><p>The table below sums up the most common use cases for all of these commands. Be sure to keep this reference handy, as you’ll undoubtedly need to use at least some of them during your Git career.</p>
<p>Command</p>
<p>Scope</p>
<p>Common use cases</p>
<p><code>git reset</code></p>
<p>Commit-level</p>
<p>Discard commits in a private branch or throw away uncommited changes</p>
<p><code>git reset</code></p>
<p>File-level</p>
<p>Unstage a file</p>
<p><code>git checkout</code></p>
<p>Commit-level</p>
<p>Switch between branches or inspect old snapshots</p>
<p><code>git checkout</code></p>
<p>File-level</p>
<p>Discard changes in the working directory</p>
<p><code>git revert</code></p>
<p>Commit-level</p>
<p>Undo commits in a public branch</p>
<p><code>git revert</code></p>
<p>File-level</p>
<p>(N&#x2F;A)</p>
<h2 id="Commit-Level-Operations"><a href="#Commit-Level-Operations" class="headerlink" title="Commit Level Operations"></a>Commit Level Operations</h2><p>The parameters that you pass to <code>git reset</code> and <code>git checkout</code>determine their scope. When you don’t include a file path as a parameter, they operate on whole commits. That’s what we’ll be exploring in this section. Note that <code>git revert</code> has no file-level counterpart.</p>
<h3 id="Reset-A-Specific-Commit"><a href="#Reset-A-Specific-Commit" class="headerlink" title="Reset A Specific Commit"></a>Reset A Specific Commit</h3><p>On the commit-level, resetting is a way to move the tip of a branch to a different commit. This can be used to remove commits from the current branch. For example, the following command moves the <code>hotfix</code> branch backwards by two commits.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout hotfix git reset HEAD~2<br></code></pre></td></tr></table></figure>

<p>The two commits that were on the end of <code>hotfix</code> are now dangling, or orphaned commits. This means they will be deleted the next time Git performs a garbage collection. In other words, you’re saying that you want to throw away these commits. This can be visualized as the following:</p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:e8a43261-2460-4783-9731-1197dc8959ab/03-04%20Reset%20a%20specific%20commit.png?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="Resetting the hotfix branch to HEAD-2"></p>
<p>This usage of <code>git reset</code> is a simple way to undo changes that haven’t been shared with anyone else. It’s your go-to command when you’ve started working on a feature and find yourself thinking, “Oh crap, what am I doing? I should just start over.”</p>
<p>In addition to moving the current branch, you can also get <code>git reset</code> to alter the staged snapshot and&#x2F;or the working directory by passing it one of the following flags:</p>
<ul>
<li><code>--soft</code> – The staged snapshot and working directory are not altered in any way.</li>
<li><code>--mixed</code> – The staged snapshot is updated to match the specified commit, but the working directory is not affected. This is the default option.</li>
<li><code>--hard</code> – The staged snapshot and the working directory are both updated to match the specified commit.</li>
</ul>
<p>It’s easier to think of these modes as defining the scope of a <code>git reset</code> operation. For further detailed information visit the <code>[git reset](https://www.atlassian.com/git/tutorials/undoing-changes/git-reset)</code> page.</p>
<h3 id="Checkout-old-commits"><a href="#Checkout-old-commits" class="headerlink" title="Checkout old commits"></a>Checkout old commits</h3><p>The <code>git checkout</code> command is used to update the state of the repository to a specific point in the projects history. When passed with a branch name, it lets you switch between branches.</p>
<p> <code>git checkout hotfix</code></p>
<p>Internally, all the above command does is move <code>HEAD</code> to a different branch and update the working directory to match. Since this has the potential to overwrite local changes, Git forces you to commit or <a target="_blank" rel="noopener" href="https://www.atlassian.com/git/tutorials/saving-changes/git-stash">stash</a> any changes in the working directory that will be lost during the checkout operation. Unlike <code>git reset</code>, <code>git checkout</code> doesn’t move any branches around.</p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:7dffc21e-29c6-4bfd-acd1-2965fcdd923e/05-06%20Checkout%20old%20commits.png?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="Moving HEAD from master to hotfix"></p>
<p>You can also check out arbitrary commits by passing the commit reference instead of a branch. This does the exact same thing as checking out a branch: it moves the <code>HEAD</code> reference to the specified commit. For example, the following command will check out the grandparent of the current commit:</p>
<p> <code>git checkout HEAD~2</code></p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:9b4d9562-7ed1-441c-bbd1-1897bea5676e/07.svg?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="Moving `HEAD` to an arbitrary commit"></p>
<p>This is useful for quickly inspecting an old version of your project. However, since there is no branch reference to the current <code>HEAD</code>, this puts you in a detached <code>HEAD</code> state. This can be dangerous if you start adding new commits because there will be no way to get back to them after you switch to another branch. For this reason, you should always create a new branch before adding commits to a detached <code>HEAD</code>.</p>
<h3 id="Undo-Public-Commits-with-Revert"><a href="#Undo-Public-Commits-with-Revert" class="headerlink" title="Undo Public Commits with Revert"></a>Undo Public Commits with Revert</h3><p>Reverting undoes a commit by creating a new commit. This is a safe way to undo changes, as it has no chance of re-writing the commit history. For example, the following command will figure out the changes contained in the 2nd to last commit, create a new commit undoing those changes, and tack the new commit onto the existing project.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout hotfix git revert HEAD~2<br></code></pre></td></tr></table></figure>

<p>This can be visualized as the following:</p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:f02c67ca-d7b8-47f8-98f8-e0017dc9f7c5/08-09%20Undo%20public%20commits.svg?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="Reverting the 2nd to last commit"></p>
<p>Contrast this with <code>git reset</code>, which <em>does</em> alter the existing commit history. For this reason, <code>git revert</code> should be used to undo changes on a public branch, and <code>git reset</code> should be reserved for undoing changes on a private branch.</p>
<p>You can also think of <code>git revert</code> as a tool for undoing _committed_changes, while <code>git reset HEAD</code> is for undoing _uncommitted_changes.</p>
<p>Like <code>git checkout</code>, <code>git revert</code> has the potential to overwrite files in the working directory, so it will ask you to commit or <a target="_blank" rel="noopener" href="https://www.atlassian.com/git/tutorials/saving-changes/git-stash">stash changes</a> that would be lost during the revert operation.</p>
<h2 id="File-level-Operations"><a href="#File-level-Operations" class="headerlink" title="File-level Operations"></a>File-level Operations</h2><p>The <code>git reset</code> and <code>git checkout</code> commands also accept an optional file path as a parameter. This dramatically alters their behavior. Instead of operating on entire snapshots, this forces them to limit their operations to a single file.</p>
<h3 id="Git-Reset-A-Specific-File"><a href="#Git-Reset-A-Specific-File" class="headerlink" title="Git Reset A Specific File"></a>Git Reset A Specific File</h3><p>When invoked with a file path, <code>git reset</code> updates the <em>staged snapshot</em> to match the version from the specified commit. For example, this command will fetch the version of <code>foo.py</code> in the 2nd-to-last commit and stage it for the next commit:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git reset HEAD~2 foo.py<br></code></pre></td></tr></table></figure>

<p>As with the commit-level version of <code>git reset</code>, this is more commonly used with <code>HEAD</code> rather than an arbitrary commit. Running <code>git reset HEAD foo.py</code> will unstage <code>foo.py</code>. The changes it contains will still be present in the working directory.</p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:1a010f5a-c90d-49ee-a0e6-31054433e2d4/07.svg?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="Moving a file from the commit history into the staged snapshot"></p>
<p>The <code>--soft</code>, <code>--mixed</code>, and <code>--hard</code> flags do not have any effect on the file-level version of <code>git reset</code>, as the staged snapshot is <em>always</em> updated, and the working directory is <em>never</em> updated.</p>
<h3 id="Git-Checkout-File"><a href="#Git-Checkout-File" class="headerlink" title="Git Checkout File"></a>Git Checkout File</h3><p>Checking out a file is similar to using <code>git reset</code> with a file path, except it updates the <em>working directory</em> instead of the stage. Unlike the commit-level version of this command, this does not move the <code>HEAD</code> reference, which means that you won’t switch branches.</p>
<p><img src="https://wac-cdn.atlassian.com/dam/jcr:cc252fc0-fc76-4740-8458-9c0d7af94bca/08.svg?cdnVersion=116" srcset="/img/loading.gif" lazyload alt="Moving a file from the commit history into the working directory"></p>
<p>For example, the following command makes <code>foo.py</code> in the working directory match the one from the 2nd-to-last commit:<br><strong>（要将特定的文件而不是所有文件退回某个版本时）</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout HEAD~2 foo.py<br></code></pre></td></tr></table></figure>

<p>Just like the commit-level invocation of <code>git checkout</code>, this can be used to inspect old versions of a project—but the scope is limited to the specified file.</p>
<p>If you stage and commit the checked-out file, this has the effect of “reverting” to the old version of that file. Note that this removes <em>all</em> of the subsequent changes to the file, whereas the <code>git revert</code> command undoes only the changes introduced by the specified commit.</p>
<p>Like <code>git reset</code>, this is commonly used with <code>HEAD</code> as the commit reference. For instance, <code>git checkout HEAD foo.py</code> has the effect of discarding unstaged changes to <code>foo.py</code>. This is similar behavior to <code>git reset HEAD --hard</code>, but it operates only on the specified file.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>You should now have all the tools you could ever need to undo changes in a Git repository. The <code>[git reset](https://www.atlassian.com/git/tutorials/undoing-changes/git-reset)</code>, <code>[git checkout](https://www.atlassian.com/git/tutorials/using-branches/git-checkout)</code>, and <code>[git revert](https://www.atlassian.com/git/tutorials/undoing-changes/git-revert)</code>commands can be confusing, but when you think about their effects on the working directory, staged snapshot, and commit history, it should be easier to discern which command fits the development task at hand.</p>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%8A%80%E6%9C%AF/" class="category-chain-item">技术</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/git/">#git</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Git基本操作</div>
      <div>https://alndaly.github.io/2022/04/05/Git/Git/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Kinda Hall</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年4月5日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/04/05/Anaconda/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="Anaconda环境配置/基本操作">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Anaconda环境配置/基本操作</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/04/05/Git/forking%20workflow/" title="Forking Workflow">
                        <span class="hidden-mobile">Forking Workflow</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'Alndaly/alndaly.github.io');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});
  });
</script>





    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <span>Life</span> <i class="iconfont icon-love"></i> <span>Kinda</span> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  
    <!-- Google Analytics -->
    <script defer>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('https://www.google-analytics.com/analytics.js', function() {
          window.ga = window.ga || function() { (ga.q = ga.q || []).push(arguments) };
          ga.l = +new Date;
          ga('create', '3386895327', 'auto');
          ga('send', 'pageview');
        });
      }
    </script>
  

  
    <!-- Google gtag.js -->
    <script defer>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('https://www.googletagmanager.com/gtag/js?id=G-0Q63MSHL4Z', function() {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-0Q63MSHL4Z');
        });
      }
    </script>
  

  

  

  

  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
