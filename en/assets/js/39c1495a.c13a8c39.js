"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[4075],{21505:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>m,contentTitle:()=>o,default:()=>u,frontMatter:()=>p,metadata:()=>a,toc:()=>i});var r=n(87462),l=(n(67294),n(3905));n(16758);const p={title:"mitmproxy\u4ee3\u7406/\u722c\u866b",date:new Date("2022-04-05T15:15:27.000Z"),tags:["python","\u722c\u866b"],description:"\u722c\u866b\u76f8\u5173\u6587\u6863"},o=void 0,a={unversionedId:"others/Proxy/mitproxy",id:"others/Proxy/mitproxy",title:"mitmproxy\u4ee3\u7406/\u722c\u866b",description:"\u722c\u866b\u76f8\u5173\u6587\u6863",source:"@site/docs/others/Proxy/mitproxy.md",sourceDirName:"others/Proxy",slug:"/others/Proxy/mitproxy",permalink:"/en/docs/others/Proxy/mitproxy",draft:!1,editUrl:"https://github.com/alndaly/alndaly.github.io/edit/docusaurus/docs/others/Proxy/mitproxy.md",tags:[{label:"python",permalink:"/en/docs/tags/python"},{label:"\u722c\u866b",permalink:"/en/docs/tags/\u722c\u866b"}],version:"current",lastUpdatedAt:1671095402,formattedLastUpdatedAt:"Dec 15, 2022",frontMatter:{title:"mitmproxy\u4ee3\u7406/\u722c\u866b",date:"2022-04-05T15:15:27.000Z",tags:["python","\u722c\u866b"],description:"\u722c\u866b\u76f8\u5173\u6587\u6863"},sidebar:"anyThing",previous:{title:"Pip\u57fa\u672c\u64cd\u4f5c",permalink:"/en/docs/others/Pip/"},next:{title:"conda\u7cfb\u5217\u64cd\u4f5c",permalink:"/en/docs/others/Shell/conda"}},m={},i=[{value:"1.\u5b89\u88c5",id:"1\u5b89\u88c5",level:2},{value:"2.\u5f00\u542f\u76d1\u6d4b",id:"2\u5f00\u542f\u76d1\u6d4b",level:2},{value:"3.\u7f51\u7edc\u73af\u5883\u914d\u7f6e",id:"3\u7f51\u7edc\u73af\u5883\u914d\u7f6e",level:2}],s={toc:i};function u(t){let{components:e,...n}=t;return(0,l.kt)("wrapper",(0,r.Z)({},s,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5b98\u7f51\u5730\u5740\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://mitmproxy.org"},"https://mitmproxy.org"))),(0,l.kt)("h2",{id:"1\u5b89\u88c5"},"1.\u5b89\u88c5"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"MAC\uff1a")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"brew install mitmproxy\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"MAC/WINDOWS/LINUX")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"pip install mitmproxy\n")),(0,l.kt)("h2",{id:"2\u5f00\u542f\u76d1\u6d4b"},"2.\u5f00\u542f\u76d1\u6d4b"),(0,l.kt)("p",null,"\u5f00\u542fmitmproxy\u7684\u8bbe\u5907\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"mitmproxy -p \u7aef\u53e3\u53f7\n")),(0,l.kt)("p",null,"\u6709\u4e09\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5f00\u542fmitmproxy\u76d1\u6d4b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"mitmproxy")," \u7ec8\u7aef\u53ef\u4ea4\u4e92\u754c\u9762"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"mitmweb")," \u6d4f\u89c8\u5668\u7248GUI\u53ef\u4ea4\u4e92\u754c\u9762"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"mitmdump")," \u7ec8\u7aef\u8f93\u51fa\uff08\u4e0d\u53ef\u4ea4\u4e92\uff09")),(0,l.kt)("h2",{id:"3\u7f51\u7edc\u73af\u5883\u914d\u7f6e"},"3.\u7f51\u7edc\u73af\u5883\u914d\u7f6e"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u88ab\u76d1\u6d4b\u7684\u8bbe\u5907\uff08\u4e00\u822c\u662f\u4f60\u7684\u624b\u673a\uff09\u548c\u5f00\u542fmitmproxy\u7684\u8bbe\u5907\uff08\u4e00\u822c\u662f\u7535\u8111\uff09\u8981\u5728\u540c\u4e00\u7247\u5c40\u57df\u7f51\u5185\u3002")),(0,l.kt)("p",null,"\u624b\u673a\u8fdb\u5165\u5c40\u57df\u7f51\u540e\uff08\u53ef\u4ee5\u901a\u8fc7\u8fde\u63a5\u70ed\u70b9\uff09\u540e \uff0c\u5728\u70ed\u70b9\u6a21\u5757\u91cc\u5f00\u542f\u81ea\u5b9a\u4e49\u4ee3\u7406\uff0c\u7aef\u53e3\u53f7\u6307\u5b9a\u540c\u5f00\u542fmitmproxy\u670d\u52a1\u65f6\u786e\u5b9a\u7684\u7aef\u53e3\u53f7\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u624b\u673a\uff08\u6b64\u5904IOS\u4e3e\u4f8b\uff09\u5177\u4f53\u64cd\u4f5c\uff1a")),(0,l.kt)("p",null,"Settings=>WLAN=>\u5c40\u57df\u7f51\u7f51\u7edc\uff08\u4e00\u822c\u4e5f\u5c31\u662f\u4f60\u7684\u70ed\u70b9\uff09\u53f3\u4fa7\u611f\u53f9\u53f7=>Configure Proxy=>Manaul\uff08\u586b\u5165\u4f60\u5f00\u542fmitmproxy\u76d1\u6d4b\u670d\u52a1\u7684\u8bbe\u5907\u7684ip\u4ee5\u53ca\u7aef\u53e3\u53f7\uff09"),(0,l.kt)("p",null,"\u6b64\u65f6\u8bbf\u95ee\u4efb\u4f55\u7ad9\u70b9\u7531\u4e8e\u6ca1\u6709\u8bc1\u4e66\uff0c\u90fd\u4f1a\u663e\u793a\u8bc1\u4e66\u4e0d\u53ef\u4fe1\u4efb\n\u63a5\u4e0b\u6765\u8bbf\u95ee(",(0,l.kt)("a",{parentName:"p",href:"http://mitm.it"},"http://mitm.it"),") \u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6\uff08\u6b64\u5904\u4e00\u5b9a\u8981\u5148\u8fdb\u5165\u5f00\u542fmitmproxy\u7684\u8bbe\u5907\u6240\u5728\u5c40\u57df\u7f51\u5e76\u4e14\u8bbe\u7f6e\u597d\u4ee3\u7406\u540e\u624d\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u8fd9\u4e2a\u7ad9\u70b9\uff01\uff09\u3002"),(0,l.kt)("p",null,"\u5728\u8bbe\u7f6e\u91cc\u4e0b\u8f7d\u8bc1\u4e66"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Settings=>General=>VPN&DeviceManagement=>mitmproxy=>Install")),(0,l.kt)("p",null,"\u542f\u7528\u8bc1\u4e66\uff08\u6ce8\u610f\uff0c\u4e0b\u8f7d\u8bc1\u4e66\u8fd8\u4e0d\u591f\uff01\u4e00\u5b9a\u8981\u5f00\u542f\uff01\uff09"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Settings=>General=>About=>Certificate Trust Settings=>\u5f00\u542fmitmproxy")),(0,l.kt)("p",null,"\u4e4b\u540e\u8bbf\u95ee\u7f51\u7ad9\u5c31\u4f1a\u6b63\u5e38\uff0c\u540c\u65f6\u7535\u8111\u7ec8\u7aef\u4e5f\u53ef\u4ee5\u770b\u5230\u8bf7\u6c42"),(0,l.kt)("p",null,"\u5982\u679c\u8981\u9488\u5bf9\u4e0d\u540c\u8bf7\u6c42\u505a\u4e0d\u540c\u5904\u7406/\u8bb0\u5f55\u65e5\u5fd7\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7python\u811a\u672c\u7684\u65b9\u5f0f"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u811a\u672c\u8303\u4f8b\uff1a")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'#addon.py\n\nfrom mitmproxy import http\n\ndef request(flow: http.HTTPFlow):\n    # redirect to different host\n    if flow.request.pretty_host == "example.com":\n        flow.request.host = "mitmproxy.org"\n    # answer from proxy\n    elif flow.request.path.endswith("/brew"):\n        flow.response = http.HTTPResponse.make(\n            418, **b**"I\'m a teapot",\n        )\n')),(0,l.kt)("p",null,"\u542f\u52a8\u65b9\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"mitmproxy -s ./app.py\n")))}u.isMDXComponent=!0}}]);